<!DOCTYPE html>
<html>
<head><meta name="generator" content="Hexo 3.8.0">
  <meta charset="utf-8">
  
  <title>http概述 | 点滴</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta name="description" content="HTTP 的基本性质HTTP 是简单的节虽然下一代HTTP/2协议将HTTP消息封装到了帧（frames）中，HTTP大体上还是被设计得简单易读。HTTP报文能够被人读懂，还允许简单测试，降低了门槛，对新人很友好。 HTTP 是可扩展的节在 HTTP/1.0 中出现的 HTTP headers 让协议扩展变得非常容易。只要服务端和客户端就新 headers达成语义一致，新功能就可以被轻松加入进来。">
<meta property="og:type" content="article">
<meta property="og:title" content="http概述">
<meta property="og:url" content="https://kangning1206.github.io/2018/11/27/http1/index.html">
<meta property="og:site_name" content="点滴">
<meta property="og:description" content="HTTP 的基本性质HTTP 是简单的节虽然下一代HTTP/2协议将HTTP消息封装到了帧（frames）中，HTTP大体上还是被设计得简单易读。HTTP报文能够被人读懂，还允许简单测试，降低了门槛，对新人很友好。 HTTP 是可扩展的节在 HTTP/1.0 中出现的 HTTP headers 让协议扩展变得非常容易。只要服务端和客户端就新 headers达成语义一致，新功能就可以被轻松加入进来。">
<meta property="og:locale" content="zh-CN">
<meta property="og:image" content="https://mdn.mozillademos.org/files/13819/Binary_framing2.png">
<meta property="og:image" content="https://mdn.mozillademos.org/files/13727/HTTP1_x_Connections.png">
<meta property="og:updated_time" content="2018-11-28T10:47:11.000Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="http概述">
<meta name="twitter:description" content="HTTP 的基本性质HTTP 是简单的节虽然下一代HTTP/2协议将HTTP消息封装到了帧（frames）中，HTTP大体上还是被设计得简单易读。HTTP报文能够被人读懂，还允许简单测试，降低了门槛，对新人很友好。 HTTP 是可扩展的节在 HTTP/1.0 中出现的 HTTP headers 让协议扩展变得非常容易。只要服务端和客户端就新 headers达成语义一致，新功能就可以被轻松加入进来。">
<meta name="twitter:image" content="https://mdn.mozillademos.org/files/13819/Binary_framing2.png">
  
  <link rel="stylesheet" href="/css/index.css">
</head>
</html>
<body style="


  background-color: #eff0f6

">
  <div id="container">
    <nav id="nav">
  <header class="header">
    <a href="/" class="title">Clover Tuan</a>
  </header>
  <div class="ctnWrap">
    <div class="icons">
      
        
          
            <a href="https://dribbble.com/clovertuan" target="_blank" class="nav-icn iconfont icon-dribbble"></a>
          
        
          
            <a href="https://www.behance.net/clovertuan" target="_blank" class="nav-icn iconfont icon-behance"></a>
          
        
          
            <a href="http://clovertuan.lofter.com/" target="_blank" class="nav-icn iconfont icon-lofter"></a>
          
        
          
            <a href="https://www.instagram.com/clovertuan/" target="_blank" class="nav-icn iconfont icon-instagram"></a>
          
        
          
            <a href="https://github.com/cloverTuan" target="_blank" class="nav-icn iconfont icon-github"></a>
          
        
      
    </div>
    <div class="menu">
      
        
            <a href="/" class="nav-menu ">HOME</a>
          
        
            <a href="/archives" class="nav-menu ">ARCHIVE</a>
          
        
            <a href="/about" class="nav-menu ">ABOUT</a>
          
        
      
    </div>
  </div>
</nav>
    <div id="main"><section class="article">
  <h2 class="title">http概述</h2>
  <p class="sub">11月 27, 2018</p>
  <article class="content">
    <h1 id="HTTP-的基本性质"><a href="#HTTP-的基本性质" class="headerlink" title="HTTP 的基本性质"></a>HTTP 的基本性质</h1><h2 id="HTTP-是简单的节"><a href="#HTTP-是简单的节" class="headerlink" title="HTTP 是简单的节"></a>HTTP 是简单的节</h2><p>虽然下一代HTTP/2协议将HTTP消息封装到了帧（frames）中，HTTP大体上还是被设计得简单易读。HTTP报文能够被人读懂，还允许简单测试，降低了门槛，对新人很友好。</p>
<h2 id="HTTP-是可扩展的节"><a href="#HTTP-是可扩展的节" class="headerlink" title="HTTP 是可扩展的节"></a>HTTP 是可扩展的节</h2><p>在 HTTP/1.0 中出现的 HTTP headers 让协议扩展变得非常容易。只要服务端和客户端就新 h<code>eaders</code>达成语义一致，新功能就可以被轻松加入进来。</p>
<h2 id="HTTP-是无状态，有会话的节"><a href="#HTTP-是无状态，有会话的节" class="headerlink" title="HTTP 是无状态，有会话的节"></a>HTTP 是无状态，有会话的节</h2><p>HTTP是无状态的：在同一个连接中，两个执行成功的请求之间是没有关系的。这就带来了一个问题，用户没有办法在同一个网站中进行连续的交互，比如在一个电商网站里，用户把某个商品加入到购物车，切换一个页面后再次添加了商品，这两次添加商品的请求之间没有关联，浏览器无法知道用户最终选择了哪些商品。而使用HTTP的头部扩展，HTTP Cookies就可以解决这个问题。把Cookies添加到头部中，创建一个会话让每次请求都能共享相同的上下文信息，达成相同的状态。</p>
<blockquote>
<p>注意，HTTP本质是无状态的，使用<code>Cookies</code>可以创建有状态的会话。同一台机器cookie是相同了，这样服务器就能辨别客户端访问身份；</p>
</blockquote>
<h2 id="HTTP-和连接节"><a href="#HTTP-和连接节" class="headerlink" title="HTTP 和连接节"></a>HTTP 和连接节</h2><p>一个连接是由传输层来控制的，这从根本上不属于HTTP的范围。HTTP并不需要其底层的传输层协议是面向连接的，只需要它是可靠的，或不丢失消息的（至少返回错误）。在互联网中，有两个最常用的传输层协议：TCP是可靠的，而UDP不是。因此，HTTP依赖于面向连接的TCP进行消息传递，但连接并不是必须的。</p>
<blockquote>
<p>这也是为什么http协议是建立在tcp协议之上的原因，确保每次连接可靠，但无需实时可用；</p>
</blockquote>
<p>HTTP/1.0为每一个请求/响应都打开一个TCP连接，导致了2个缺点：打开一个TCP连接需要多次往返消息传递，因此速度慢。但当多个消息周期性发送时，这样就变得更加高效：暖连接比冷连接更高效。</p>
<blockquote>
<p>上边我们说到，http 请求无需实时可用，但从实际网页需求来看，没此简历tcp连接需要3次握手，这种转身就忘记的特性，势必带来了<code>效率</code>问题，因此在http1.1中引入了长连接；也就说我们看到的头部 <code>Connection: keep-alive</code> 信息；</p>
</blockquote>
<blockquote>
<p> 长连接和短连接<br>Connection: keep-alive<br>Connection: close</p>
</blockquote>
<p>为了减轻这些缺陷，HTTP/1.1引入了流水线（被证明难以实现）和持久连接的概念：底层的TCP连接可以通过Connection头部来被部分控制。HTTP/2则发展得更远，通过在一个连接复用消息的方式来让这个连接始终保持为暖连接。 </p>
<p>为了更好的适合HTTP，设计一种更好传输协议的进程一直在进行。Google就研发了一种以UDP为基础，能提供更可靠更高效的传输协议QUIC。</p>
<h2 id="http请求"><a href="#http请求" class="headerlink" title="http请求"></a>http请求</h2><p>由于三部分组成：</p>
<ul>
<li>请求行</li>
</ul>
<p>HTTP请求是由客户端发出的消息，用来使服务器执行动作。比如：<code>GET /background.png HTTP/1.0</code> 起始行 (start-line) 包含三个元素：方法、目标(URL)、协议版本</p>
<ul>
<li>请求头 headers</li>
</ul>
<p>来自请求的 HTTP headers 遵循和 HTTP header 相同的基本结构：不区分大小写的字符串，紧跟着的冒号 (‘:’) 和一个结构取决于 header 的值。 整个 header（包括值）由一行组成，这一行可以相当长。</p>
<ul>
<li>请求体 body</li>
</ul>
<p>请求的最后一部分是它的 body。不是所有的请求都有一个 body：例如获取资源的请求，GET，HEAD，DELETE 和 OPTIONS，通常它们不需要 body。 有些请求将数据发送到服务器以便更新数据：常见的的情况是 POST 请求（包含 HTML 表单数据）。</p>
<h2 id="http-响应"><a href="#http-响应" class="headerlink" title="http 响应"></a>http 响应</h2><ul>
<li>状态行</li>
</ul>
<p>比如<code>HTTP/1.1 404 Not Found。</code>包含以下信息：协议版本 状态 状态文本；</p>
<ul>
<li>headers</li>
</ul>
<p>与请求头规则一致；</p>
<ul>
<li>响应体 body</li>
</ul>
<p>响应的最后一部分是 body。不是所有的响应都有 body：具有状态码 (如 201 或 204) 的响应，通常不会有 body。</p>
<h2 id="http2"><a href="#http2" class="headerlink" title="http2"></a>http2</h2><h3 id="http1-1-缺点"><a href="#http1-1-缺点" class="headerlink" title="http1.1 缺点"></a>http1.1 缺点</h3><ul>
<li>header 没有被压缩；</li>
<li>不同的请求，即使header 信息相似，仍然会重复传输，从共享角度看是显得多余的；</li>
</ul>
<h2 id="http2-新特点"><a href="#http2-新特点" class="headerlink" title="http2 新特点"></a>http2 新特点</h2><ul>
<li>多路复用</li>
</ul>
<p>HTTP/2 引入了一个额外的步骤：它将 HTTP/1.x 消息分成帧并嵌入到流 (stream) 中。数据帧和报头帧分离，这将允许报头压缩。将多个流组合，这是一个被称为 多路复用 (multiplexing) 的过程，它允许更有效的底层 TCP 连接。</p>
<p>HTTP/2 帧机制是在 HTTP/1.x 语法和底层传输协议之间增加了一个新的中间层，而没有从根本上修改它，即它是建立在经过验证的机制之上。</p>
<p>http2 不需要前端做任何升级，只有浏览器支持，服务器端开启，则自动切换到http2上，但必须是https协议网站；</p>
<div style="text-align: center;"><img src="https://mdn.mozillademos.org/files/13819/Binary_framing2.png" alt=""></div>



<h2 id="http-连接管理"><a href="#http-连接管理" class="headerlink" title="http 连接管理"></a>http 连接管理</h2><p> 包括：短连接、长连接、流水线，连接能管理的是客户端、服务器，中间的代理如果不支持时（路由器），则会使失效；</p>
<ul>
<li>http1.0 使用短连接（Connection: close），每次请求时，都需要优建立连接；</li>
<li>http1.1 默认使用了长连接（Connection: keep-alive），第一次请求时，建立了连接且会保持一段时间，之后请求不在重复建立连接，节省很多开销；</li>
<li>流水线，多个连续的请求不用等待立即返回就可以被发送，这样就减少了耗费在网络延迟上的时间。但在http1.1中由于各种受限，<br>可应用性没有展开。好的一点是在http2中得到了支持；<br>默认情况下，HTTP 请求是按顺序发出的。下一个请求只有在当前请求收到应答过后才会被发出。由于会受到网络延迟和带宽的限制，在下一个请求被发送到服务器之前，可能需要等待很长时间。</li>
</ul>
<div style="text-align: center;"><img src="https://mdn.mozillademos.org/files/13727/HTTP1_x_Connections.png" alt=""></div>

  </article>
  <footer class="f-cf">
    
      <a href="/2018/12/01/htmlTempleate/" class="link f-fl">⟵htmlTempleate</a>
    
    
      <a href="/2018/11/27/resource-md/" class="link f-fr">前端知识点分类⟶</a>
    
  </footer>
</section></div>
    <footer id="footer" class="f-cf">
  d.guangying@foxmail.com
  
    
      
        · <a href="https://dribbble.com/clovertuan" target="_blank" class="nav-icn">Dribbble</a>
      
    
      
        · <a href="https://www.behance.net/clovertuan" target="_blank" class="nav-icn">Behance</a>
      
    
      
        · <a href="http://clovertuan.lofter.com/" target="_blank" class="nav-icn">Lofter</a>
      
    
      
        · <a href="https://www.instagram.com/clovertuan/" target="_blank" class="nav-icn">Instagram</a>
      
    
      
        · <a href="https://github.com/cloverTuan" target="_blank" class="nav-icn">GitHub</a>
      
    
  
  <span class="copyright">All rights reserved @Clover Tuan</span>
</footer>
  </div>
</body>
</html>