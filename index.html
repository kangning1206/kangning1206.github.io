<!DOCTYPE html>
<html>
<head><meta name="generator" content="Hexo 3.8.0">
  <meta charset="utf-8">
  
  
  
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <title>
    
    点滴</title>
  
    <link rel="shortcut icon" href="/favicon.ico">
  
  <link rel="stylesheet" href="/css/style.css">
  
    <link rel="alternate" href="/atom.xml" title="点滴" type="application/atom+xml">
  
  
    <link rel="stylesheet" href="/fancybox/jquery.fancybox.min.css">
  
  <script src="/js/pace.min.js"></script>
</head>
</html>
<body>
<main class="content">
  <section class="jumbotron">
  <div class="video">
    <div class="video-frame">
      <img src="http://source.zhwangart.com/hexo/themes/ocean/video/overlay-hero.png" alt="Decorative image frame">
    </div>
    <div class="video-media">
      <video playsinline="" autoplay loop muted data-autoplay="" poster="http://source.zhwangart.com/hexo/themes/ocean/video/ocean.png" x5-video-player-type="h5">
        <source src="http://source.zhwangart.com/hexo/themes/ocean/video/ocean.mp4" type="video/mp4">
        <source src="http://source.zhwangart.com/hexo/themes/ocean/video/ocean.ogv" type="video/ogg">
        <source src="http://source.zhwangart.com/hexo/themes/ocean/video/ocean.webm" type="video/webm">
        <p>Your user agent does not support the HTML5 Video element.</p>
      </video>
      <div class="video-overlay"></div>
    </div>
    <div class="video-inner text-center text-white">
      <h1><a href="/">点滴</a></h1>
      <p></p>
      <div><img src="/images/hexo-inverted.svg" class="brand" alt="点滴"></div>
    </div>
    <div class="video-learn-more">
      <a class="anchor" href="#landingpage"><i class="fe fe-mouse"></i></a>
    </div>
  </div>
</section>

<div id="landingpage">
  <section class="outer">
  <article class="articles">
    
    <h1 class="page-type-title"></h1>

    
      
        <article id="post-css-select" class="article article-type-post" itemscope="" itemprop="blogPost">

  <div class="article-inner">
    
      <header class="article-header">
        
  
    <h2 itemprop="name">
      <a class="article-title" href="/2018/12/03/css-select/">css-select</a>
    </h2>
  

      </header>
    

    
      <div class="article-meta">
        <a href="/2018/12/03/css-select/" class="article-date">
  <time datetime="2018-12-03T08:48:47.000Z" itemprop="datePublished">2018-12-03</time>
</a>
        
      </div>
    

    <div class="article-entry" itemprop="articleBody">
      
      
      
        <table>
<thead>
<tr>
<th style="text-align:left">选择器</th>
<th style="text-align:left">权重</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left">!important</td>
<td style="text-align:left">Infinity</td>
</tr>
<tr>
<td style="text-align:left">行间样式</td>
<td style="text-align:left">1000</td>
</tr>
<tr>
<td style="text-align:left">id</td>
<td style="text-align:left">100</td>
</tr>
<tr>
<td style="text-align:left">class、属性、伪类</td>
<td style="text-align:left">10</td>
</tr>
<tr>
<td style="text-align:left">标签、伪元素</td>
<td style="text-align:left">1</td>
</tr>
<tr>
<td style="text-align:left">通配符</td>
<td style="text-align:left">0</td>
</tr>
</tbody>
</table>

      
    </div>
    <footer class="article-footer">
      <a data-url="https://kangning1206.github.io/2018/12/03/css-select/" data-id="cjp89btqf0003zvo15vq5drlv" class="article-share-link">Share</a>
      
    </footer>
  </div>

  

</article>



      
        <article id="post-margin-collapsing" class="article article-type-post" itemscope="" itemprop="blogPost">

  <div class="article-inner">
    
      <header class="article-header">
        
  
    <h2 itemprop="name">
      <a class="article-title" href="/2018/12/03/margin-collapsing/">margin-collapsing</a>
    </h2>
  

      </header>
    

    
      <div class="article-meta">
        <a href="/2018/12/03/margin-collapsing/" class="article-date">
  <time datetime="2018-12-03T03:43:46.000Z" itemprop="datePublished">2018-12-03</time>
</a>
        
      </div>
    

    <div class="article-entry" itemprop="articleBody">
      
      
      
        <p>margin collapsing</p>
<p>块级元素的上外边距和下外边距有时会合并（或折叠）为一个外边距，其大小取其中的最大者，这种行为称为外边距折叠（margin collapsing），有时也翻译为外边距合并。注意浮动元素和绝对定位元素的外边距不会折叠（因为这里触发了 块格式化上下文 Block Formatting Context， BFC）。</p>
<figure style="text-align: center;"><br>  <img src="http://www.w3school.com.cn/i/ct_css_margin_collapsing_example_1.gif" alt=""><br>    <figcaption>相邻元素</figcaption><br></figure>






<figure style="text-align: center;"><br>  <img src="http://www.w3school.com.cn/i/ct_css_margin_collapsing_example_2.gif" alt=""><br>    <figcaption>父子元素</figcaption><br></figure>

<figure><br>    <figcaption></figcaption><br></figure>


<figure><br>    <figcaption></figcaption><br></figure>
      
    </div>
    <footer class="article-footer">
      <a data-url="https://kangning1206.github.io/2018/12/03/margin-collapsing/" data-id="cjp89btqp0009zvo1oz0egd0s" class="article-share-link">Share</a>
      
    </footer>
  </div>

  

</article>



      
        <article id="post-css-box" class="article article-type-post" itemscope="" itemprop="blogPost">

  <div class="article-inner">
    
      <header class="article-header">
        
  
    <h2 itemprop="name">
      <a class="article-title" href="/2018/12/03/css-box/">css-box 盒子塌陷</a>
    </h2>
  

      </header>
    

    
      <div class="article-meta">
        <a href="/2018/12/03/css-box/" class="article-date">
  <time datetime="2018-12-03T03:42:21.000Z" itemprop="datePublished">2018-12-03</time>
</a>
        
      </div>
    

    <div class="article-entry" itemprop="articleBody">
      
      
      
        <h2 id="盒子塌陷"><a href="#盒子塌陷" class="headerlink" title="盒子塌陷"></a>盒子塌陷</h2><h3 id="什么是盒子塌陷"><a href="#什么是盒子塌陷" class="headerlink" title="什么是盒子塌陷"></a>什么是盒子塌陷</h3>
      
    </div>
    <footer class="article-footer">
      <a data-url="https://kangning1206.github.io/2018/12/03/css-box/" data-id="cjp89btqg0004zvo1dfwx4nd4" class="article-share-link">Share</a>
      
    </footer>
  </div>

  

</article>



      
        <article id="post-BFC" class="article article-type-post" itemscope="" itemprop="blogPost">

  <div class="article-inner">
    
      <header class="article-header">
        
  
    <h2 itemprop="name">
      <a class="article-title" href="/2018/12/03/BFC/">BFC</a>
    </h2>
  

      </header>
    

    
      <div class="article-meta">
        <a href="/2018/12/03/BFC/" class="article-date">
  <time datetime="2018-12-03T03:17:05.000Z" itemprop="datePublished">2018-12-03</time>
</a>
        
      </div>
    

    <div class="article-entry" itemprop="articleBody">
      
      
      
        <p>块格式化上下文（Block Formatting Context，BFC） 是Web页面的可视化CSS渲染的一部分，是布局过程中生成块级盒子的区域，也是浮动元素与其他元素的交互限定区域。</p>
<p><code>块格式化上下文包含创建它的元素内部的所有内容.</code> BFC可以解决盒子塌陷；</p>
<p>下列方式会创建块格式化上下文：</p>
<ul>
<li>根元素或包含根元素的元素</li>
<li>浮动元素（元素的 float 不是 none）</li>
<li>绝对定位元素（元素的 position 为 absolute 或 fixed）</li>
<li>行内块元素（元素的 display 为 inline-block）</li>
<li>表格单元格（元素的 display为 table-cell，HTML表格单元格默认为该值）</li>
<li>表格标题（元素的 display 为 table-caption，HTML表格标题默认为该值）</li>
<li>匿名表格单元格元素（元素的 display为 table、table-row、 table-row-group、table-header-group、table-footer-group（分别是HTML table、row、tbody、thead、tfoot的默认属性）或 inline-table）</li>
<li>overflow 值不为 visible 的块元素</li>
<li>display 值为 flow-root 的元素</li>
<li>contain 值为 layout、content或 strict 的元素</li>
<li>弹性元素（display为 flex 或 inline-flex元素的直接子元素）</li>
<li>网格元素（display为 grid 或 inline-grid 元素的直接子元素）</li>
<li>多列容器（元素的 column-count 或 column-width 不为 auto，包括 column-count 为 1）</li>
<li>column-span 为 all 的元素始终会创建一个新的BFC，即使该元素没有包裹在一个多列容器中（标准变更，Chrome bug）。<br>块格式化上下文包含创建它的元素内部的所有内容.</li>
</ul>
<p>块格式化上下文对浮动定位（参见 float）与清除浮动（参见 clear）都很重要。浮动定位和清除浮动时只会应用于同一个BFC内的元素。浮动不会影响其它BFC中元素的布局，而清除浮动只能清除同一BFC中在它前面的元素的浮动。外边距折叠（Margin collapsing）也只会发生在属于同一BFC的块级元素之间。</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="https://kangning1206.github.io/2018/12/03/BFC/" data-id="cjp89btq30000zvo1ub33svye" class="article-share-link">Share</a>
      
    </footer>
  </div>

  

</article>



      
        <article id="post-htmlTempleate" class="article article-type-post" itemscope="" itemprop="blogPost">

  <div class="article-inner">
    
      <header class="article-header">
        
  
    <h2 itemprop="name">
      <a class="article-title" href="/2018/12/01/htmlTempleate/">htmlTempleate</a>
    </h2>
  

      </header>
    

    
      <div class="article-meta">
        <a href="/2018/12/01/htmlTempleate/" class="article-date">
  <time datetime="2018-12-01T10:15:13.000Z" itemprop="datePublished">2018-12-01</time>
</a>
        
      </div>
    

    <div class="article-entry" itemprop="articleBody">
      
      
      
        <p>推荐一种 react 或者 vue 渲染 html页面模板，目的接在提高用户体验和性能</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- 文档类型默认Html5 --&gt;</span></span><br><span class="line"><span class="meta">&lt;!DOCTYPE html&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- 根据需要设置语言或者移除lang --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">"zh-cn"</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">  <span class="comment">&lt;!-- 需要保留，页面编码格式，推荐uft-8 --&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">"UTF-8"</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">meta</span> <span class="attr">http-equiv</span>=<span class="string">"Content-Type"</span> <span class="attr">content</span>=<span class="string">"text/html"</span> /&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">meta</span> <span class="attr">http-equiv</span>=<span class="string">"X-UA-Compatible"</span> <span class="attr">content</span>=<span class="string">"IE=edge"</span>&gt;</span></span><br><span class="line">  <span class="comment">&lt;!-- 针对IE8设置，其他浏览器无效 --&gt;</span></span><br><span class="line">  <span class="comment">&lt;!-- 如果IE有安装Google Chrome Frame，那么就走安装的组件 --&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">meta</span> <span class="attr">http-equiv</span>=<span class="string">"X-UA-Compatible"</span> <span class="attr">content</span>=<span class="string">"IE=edge,chrome=1"</span>&gt;</span></span><br><span class="line">  <span class="comment">&lt;!-- SEO: 页面关键词 keywords --&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">meta</span> <span class="attr">name</span>=<span class="string">"keywords"</span> <span class="attr">content</span>=<span class="string">"your keywords"</span>&gt;</span></span><br><span class="line">  <span class="comment">&lt;!-- SEO: 页面描述内容 description --&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">meta</span> <span class="attr">name</span>=<span class="string">"description"</span> <span class="attr">content</span>=<span class="string">"your description"</span>&gt;</span></span><br><span class="line">  <span class="comment">&lt;!-- viewport 需要设置 --&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">meta</span> <span class="attr">name</span>=<span class="string">"viewport"</span> <span class="attr">content</span>=<span class="string">"width=device-width,initial-scale=1.0,user-scalable=no"</span> /&gt;</span></span><br><span class="line">  <span class="comment">&lt;!-- 页面标题 --&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">title</span>&gt;</span>Document<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">  <span class="comment">&lt;!-- 性能：DNS预获取，将网站中访问的资源服务器域名一一定义在此 --&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">link</span> <span class="attr">rel</span>=<span class="string">"dns-prefetch"</span> <span class="attr">href</span>=<span class="string">"//yourwebsite.com"</span>&gt;</span></span><br><span class="line">  <span class="comment">&lt;!-- 性能：预连接、与查询、预加载，注意：预查询、预加载 不等于提前执行，仅是资源准备就绪 --&gt;</span></span><br><span class="line">  <span class="comment">&lt;!-- preconnect: 预先建立tcp连接，根据需要，将网站访问资源服务器域名一一定义在此 --&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">link</span> <span class="attr">rel</span>=<span class="string">"preconnect"</span> <span class="attr">href</span>=<span class="string">"//yourwebsite.com"</span>&gt;</span></span><br><span class="line">  <span class="comment">&lt;!-- prefetch: 能够让浏览器预加载一个资源（HTML，JS，CSS或者图片等），可以让用户跳转到其他页面时，响应速度更快。</span></span><br><span class="line"><span class="comment">  Prefetch 提示浏览器这个资源将来可能需要，但是把决定是否和什么时间加载这个资源的决定权交给浏览器。</span></span><br><span class="line"><span class="comment">  --&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">link</span> <span class="attr">rel</span>=<span class="string">"prefetch"</span> <span class="attr">href</span>=<span class="string">"//yourwebsite.com/chunk.css"</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">link</span> <span class="attr">rel</span>=<span class="string">"prefetch"</span> <span class="attr">href</span>=<span class="string">"//yourwebsite.com/chunk.js"</span>&gt;</span></span><br><span class="line">  <span class="comment">&lt;!--当部分资源在页面加载完成后即刻需要时，也就说很有必要的资源。可以使用preload,as属性设置文件类型</span></span><br><span class="line"><span class="comment">  preload不阻塞文档onload</span></span><br><span class="line"><span class="comment">   --&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">link</span> <span class="attr">rel</span>=<span class="string">"preload"</span> <span class="attr">href</span>=<span class="string">"//yourwebsite.com/chunk.css"</span> <span class="attr">as</span>=<span class="string">"style"</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">link</span> <span class="attr">rel</span>=<span class="string">"preload"</span> <span class="attr">href</span>=<span class="string">"//yourwebsite.com/chunk.js"</span> <span class="attr">as</span>=<span class="string">"script"</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">link</span> <span class="attr">rel</span>=<span class="string">"preload"</span> <span class="attr">href</span>=<span class="string">"//yourwebsite.com/image.png"</span> <span class="attr">as</span>=<span class="string">"image"</span>&gt;</span></span><br><span class="line">  <span class="comment">&lt;!-- 应用css，头部不出现引用js文件，避免阻塞渲染 --&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">link</span> <span class="attr">rel</span>=<span class="string">"stylesheet"</span> <span class="attr">href</span>=<span class="string">"//yourwebsite.com/css/app.css"</span>&gt;</span></span><br><span class="line">  <span class="comment">&lt;!-- 站点：favicon --&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">link</span> <span class="attr">rel</span>=<span class="string">"icon"</span> <span class="attr">type</span>=<span class="string">"image/png"</span> <span class="attr">sizes</span>=<span class="string">32x32</span> <span class="attr">href</span>=<span class="string">"/img/icons/favicon-32x32.png"</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">link</span> <span class="attr">rel</span>=<span class="string">"icon"</span> <span class="attr">type</span>=<span class="string">"image/png"</span> <span class="attr">sizes</span>=<span class="string">16x16</span> <span class="attr">href</span>=<span class="string">"/img/icons/favicon-16x16.png"</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">noscript</span>&gt;</span><span class="tag">&lt;<span class="name">strong</span>&gt;</span>脚本不支持或被关闭时的提醒信息，可有可无。<span class="tag">&lt;/<span class="name">strong</span>&gt;</span><span class="tag">&lt;/<span class="name">noscript</span>&gt;</span></span><br><span class="line">  <span class="comment">&lt;!-- 应用入口元素 --&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">"app"</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">  <span class="comment">&lt;!-- 底部引用脚本：初始化页面渲染完成后，在执行脚本 --&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">"//yourwebsite.com/js/chunk-vendors.2ab46520.js"</span>&gt;</span><span class="undefined"> </span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">"//yourwebsite.com/js/app.ff0e0ca9.js"</span>&gt;</span><span class="undefined"> </span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>
      
    </div>
    <footer class="article-footer">
      <a data-url="https://kangning1206.github.io/2018/12/01/htmlTempleate/" data-id="cjp89btql0006zvo1shv9aton" class="article-share-link">Share</a>
      
    </footer>
  </div>

  

</article>



      
        <article id="post-http1" class="article article-type-post" itemscope="" itemprop="blogPost">

  <div class="article-inner">
    
      <header class="article-header">
        
  
    <h2 itemprop="name">
      <a class="article-title" href="/2018/11/27/http1/">http概述</a>
    </h2>
  

      </header>
    

    
      <div class="article-meta">
        <a href="/2018/11/27/http1/" class="article-date">
  <time datetime="2018-11-27T07:30:21.000Z" itemprop="datePublished">2018-11-27</time>
</a>
        
      </div>
    

    <div class="article-entry" itemprop="articleBody">
      
      
      
        <h1 id="HTTP-的基本性质"><a href="#HTTP-的基本性质" class="headerlink" title="HTTP 的基本性质"></a>HTTP 的基本性质</h1><h2 id="HTTP-是简单的节"><a href="#HTTP-是简单的节" class="headerlink" title="HTTP 是简单的节"></a>HTTP 是简单的节</h2><p>虽然下一代HTTP/2协议将HTTP消息封装到了帧（frames）中，HTTP大体上还是被设计得简单易读。HTTP报文能够被人读懂，还允许简单测试，降低了门槛，对新人很友好。</p>
<h2 id="HTTP-是可扩展的节"><a href="#HTTP-是可扩展的节" class="headerlink" title="HTTP 是可扩展的节"></a>HTTP 是可扩展的节</h2><p>在 HTTP/1.0 中出现的 HTTP headers 让协议扩展变得非常容易。只要服务端和客户端就新 h<code>eaders</code>达成语义一致，新功能就可以被轻松加入进来。</p>
<h2 id="HTTP-是无状态，有会话的节"><a href="#HTTP-是无状态，有会话的节" class="headerlink" title="HTTP 是无状态，有会话的节"></a>HTTP 是无状态，有会话的节</h2><p>HTTP是无状态的：在同一个连接中，两个执行成功的请求之间是没有关系的。这就带来了一个问题，用户没有办法在同一个网站中进行连续的交互，比如在一个电商网站里，用户把某个商品加入到购物车，切换一个页面后再次添加了商品，这两次添加商品的请求之间没有关联，浏览器无法知道用户最终选择了哪些商品。而使用HTTP的头部扩展，HTTP Cookies就可以解决这个问题。把Cookies添加到头部中，创建一个会话让每次请求都能共享相同的上下文信息，达成相同的状态。</p>
<blockquote>
<p>注意，HTTP本质是无状态的，使用<code>Cookies</code>可以创建有状态的会话。同一台机器cookie是相同了，这样服务器就能辨别客户端访问身份；</p>
</blockquote>
<h2 id="HTTP-和连接节"><a href="#HTTP-和连接节" class="headerlink" title="HTTP 和连接节"></a>HTTP 和连接节</h2><p>一个连接是由传输层来控制的，这从根本上不属于HTTP的范围。HTTP并不需要其底层的传输层协议是面向连接的，只需要它是可靠的，或不丢失消息的（至少返回错误）。在互联网中，有两个最常用的传输层协议：TCP是可靠的，而UDP不是。因此，HTTP依赖于面向连接的TCP进行消息传递，但连接并不是必须的。</p>
<blockquote>
<p>这也是为什么http协议是建立在tcp协议之上的原因，确保每次连接可靠，但无需实时可用；</p>
</blockquote>
<p>HTTP/1.0为每一个请求/响应都打开一个TCP连接，导致了2个缺点：打开一个TCP连接需要多次往返消息传递，因此速度慢。但当多个消息周期性发送时，这样就变得更加高效：暖连接比冷连接更高效。</p>
<blockquote>
<p>上边我们说到，http 请求无需实时可用，但从实际网页需求来看，没此简历tcp连接需要3次握手，这种转身就忘记的特性，势必带来了<code>效率</code>问题，因此在http1.1中引入了长连接；也就说我们看到的头部 <code>Connection: keep-alive</code> 信息；</p>
</blockquote>
<blockquote>
<p> 长连接和短连接<br>Connection: keep-alive<br>Connection: close</p>
</blockquote>
<p>为了减轻这些缺陷，HTTP/1.1引入了流水线（被证明难以实现）和持久连接的概念：底层的TCP连接可以通过Connection头部来被部分控制。HTTP/2则发展得更远，通过在一个连接复用消息的方式来让这个连接始终保持为暖连接。 </p>
<p>为了更好的适合HTTP，设计一种更好传输协议的进程一直在进行。Google就研发了一种以UDP为基础，能提供更可靠更高效的传输协议QUIC。</p>
<h2 id="http请求"><a href="#http请求" class="headerlink" title="http请求"></a>http请求</h2><p>由于三部分组成：</p>
<ul>
<li>请求行</li>
</ul>
<p>HTTP请求是由客户端发出的消息，用来使服务器执行动作。比如：<code>GET /background.png HTTP/1.0</code> 起始行 (start-line) 包含三个元素：方法、目标(URL)、协议版本</p>
<ul>
<li>请求头 headers</li>
</ul>
<p>来自请求的 HTTP headers 遵循和 HTTP header 相同的基本结构：不区分大小写的字符串，紧跟着的冒号 (‘:’) 和一个结构取决于 header 的值。 整个 header（包括值）由一行组成，这一行可以相当长。</p>
<ul>
<li>请求体 body</li>
</ul>
<p>请求的最后一部分是它的 body。不是所有的请求都有一个 body：例如获取资源的请求，GET，HEAD，DELETE 和 OPTIONS，通常它们不需要 body。 有些请求将数据发送到服务器以便更新数据：常见的的情况是 POST 请求（包含 HTML 表单数据）。</p>
<h2 id="http-响应"><a href="#http-响应" class="headerlink" title="http 响应"></a>http 响应</h2><ul>
<li>状态行</li>
</ul>
<p>比如<code>HTTP/1.1 404 Not Found。</code>包含以下信息：协议版本 状态 状态文本；</p>
<ul>
<li>headers</li>
</ul>
<p>与请求头规则一致；</p>
<ul>
<li>响应体 body</li>
</ul>
<p>响应的最后一部分是 body。不是所有的响应都有 body：具有状态码 (如 201 或 204) 的响应，通常不会有 body。</p>
<h2 id="http2"><a href="#http2" class="headerlink" title="http2"></a>http2</h2><h3 id="http1-1-缺点"><a href="#http1-1-缺点" class="headerlink" title="http1.1 缺点"></a>http1.1 缺点</h3><ul>
<li>header 没有被压缩；</li>
<li>不同的请求，即使header 信息相似，仍然会重复传输，从共享角度看是显得多余的；</li>
</ul>
<h2 id="http2-新特点"><a href="#http2-新特点" class="headerlink" title="http2 新特点"></a>http2 新特点</h2><ul>
<li>多路复用</li>
</ul>
<p>HTTP/2 引入了一个额外的步骤：它将 HTTP/1.x 消息分成帧并嵌入到流 (stream) 中。数据帧和报头帧分离，这将允许报头压缩。将多个流组合，这是一个被称为 多路复用 (multiplexing) 的过程，它允许更有效的底层 TCP 连接。</p>
<p>HTTP/2 帧机制是在 HTTP/1.x 语法和底层传输协议之间增加了一个新的中间层，而没有从根本上修改它，即它是建立在经过验证的机制之上。</p>
<p>http2 不需要前端做任何升级，只有浏览器支持，服务器端开启，则自动切换到http2上，但必须是https协议网站；</p>
<div style="text-align: center;"><img src="https://mdn.mozillademos.org/files/13819/Binary_framing2.png" alt=""></div>



<h2 id="http-连接管理"><a href="#http-连接管理" class="headerlink" title="http 连接管理"></a>http 连接管理</h2><p> 包括：短连接、长连接、流水线，连接能管理的是客户端、服务器，中间的代理如果不支持时（路由器），则会使失效；</p>
<ul>
<li>http1.0 使用短连接（Connection: close），每次请求时，都需要优建立连接；</li>
<li>http1.1 默认使用了长连接（Connection: keep-alive），第一次请求时，建立了连接且会保持一段时间，之后请求不在重复建立连接，节省很多开销；</li>
<li>流水线，多个连续的请求不用等待立即返回就可以被发送，这样就减少了耗费在网络延迟上的时间。但在http1.1中由于各种受限，<br>可应用性没有展开。好的一点是在http2中得到了支持；<br>默认情况下，HTTP 请求是按顺序发出的。下一个请求只有在当前请求收到应答过后才会被发出。由于会受到网络延迟和带宽的限制，在下一个请求被发送到服务器之前，可能需要等待很长时间。</li>
</ul>
<div style="text-align: center;"><img src="https://mdn.mozillademos.org/files/13727/HTTP1_x_Connections.png" alt=""></div>

      
    </div>
    <footer class="article-footer">
      <a data-url="https://kangning1206.github.io/2018/11/27/http1/" data-id="cjp89btqo0008zvo1kdju6c75" class="article-share-link">Share</a>
      
    </footer>
  </div>

  

</article>



      
        <article id="post-resource-md" class="article article-type-post" itemscope="" itemprop="blogPost">

  <div class="article-inner">
    
      <header class="article-header">
        
  
    <h2 itemprop="name">
      <a class="article-title" href="/2018/11/27/resource-md/">前端知识点分类</a>
    </h2>
  

      </header>
    

    
      <div class="article-meta">
        <a href="/2018/11/27/resource-md/" class="article-date">
  <time datetime="2018-11-27T01:48:25.000Z" itemprop="datePublished">2018-11-27</time>
</a>
        
      </div>
    

    <div class="article-entry" itemprop="articleBody">
      
      
      
        <hr>
<h1 id="vue"><a href="#vue" class="headerlink" title="vue"></a>vue</h1><ul>
<li>vue.js基本</li>
<li>vuex 数据状态管理</li>
<li>axios使用</li>
<li>vue-router</li>
<li>pc端ui和移动端ui</li>
</ul>
<h1 id="JavaScript"><a href="#JavaScript" class="headerlink" title="JavaScript"></a>JavaScript</h1><ul>
<li>闭包</li>
<li>作用域、作用域链路</li>
<li>继承</li>
<li>es2015新特性</li>
</ul>
<h1 id="web原理"><a href="#web原理" class="headerlink" title="web原理"></a>web原理</h1><ul>
<li>http</li>
<li>304缓存</li>
<li>cors共享</li>
<li>浏览器原理:<a href="https://www.html5rocks.com/zh/tutorials/internals/howbrowserswork/" target="_blank" rel="noopener">https://www.html5rocks.com/zh/tutorials/internals/howbrowserswork/</a></li>
</ul>
<h1 id="node"><a href="#node" class="headerlink" title="node"></a>node</h1><ul>
<li>koa.js</li>
</ul>
<h1 id="工程化"><a href="#工程化" class="headerlink" title="工程化"></a>工程化</h1><ul>
<li>webpack</li>
<li>客户端es6，vue,react配置</li>
<li>服务器端es6</li>
</ul>
<h1 id="质量"><a href="#质量" class="headerlink" title="质量"></a>质量</h1><ul>
<li>eslint配置和常用标准</li>
<li>单元测试、覆盖率、用户测试：mocha,karma,e2e<h1 id="了解库"><a href="#了解库" class="headerlink" title="了解库"></a>了解库</h1></li>
<li>测试框架,比如 Mocha、Jasmine、Karma、Tape</li>
<li>mock.js</li>
</ul>
<h1 id="工具"><a href="#工具" class="headerlink" title="工具"></a>工具</h1><ul>
<li>抓包工具，如charles使用</li>
<li>浏览器开发者工具</li>
<li>编辑器</li>
<li>检查 Cache 相关 HTTP 首部的工具. <a href="https://redbot.org/" target="_blank" rel="noopener">RedBot</a></li>
</ul>
<h1 id="其他"><a href="#其他" class="headerlink" title="其他"></a>其他</h1><ul>
<li>rest接口开发模式</li>
</ul>
<h1 id="学习网站"><a href="#学习网站" class="headerlink" title="学习网站"></a>学习网站</h1><p><a href="https://developer.mozilla.org/zh-CN/docs/Web/HTTP/Overview" target="_blank" rel="noopener">https://developer.mozilla.org/zh-CN/docs/Web/HTTP/Overview</a></p>

      
    </div>
    <footer class="article-footer">
      <a data-url="https://kangning1206.github.io/2018/11/27/resource-md/" data-id="cjp89btqt000czvo1e8epgrsz" class="article-share-link">Share</a>
      
    </footer>
  </div>

  

</article>



      
        <article id="post-axios" class="article article-type-post" itemscope="" itemprop="blogPost">

  <div class="article-inner">
    
      <header class="article-header">
        
  
    <h2 itemprop="name">
      <a class="article-title" href="/2017/06/09/axios/">axios遇到OPTIONS请求</a>
    </h2>
  

      </header>
    

    
      <div class="article-meta">
        <a href="/2017/06/09/axios/" class="article-date">
  <time datetime="2017-06-09T08:36:39.000Z" itemprop="datePublished">2017-06-09</time>
</a>
        
      </div>
    

    <div class="article-entry" itemprop="articleBody">
      
      
      
        <h2 id="axios"><a href="#axios" class="headerlink" title="axios"></a>axios</h2><p>Axios 是一个基于 promise 的 HTTP 库，可以用在浏览器和 node.js 中。大部分前端工程师在使用axios或者类似fetch库，<br>方便易用，但在CORS跨域资源获取中遇到的问题不少。</p>
<h2 id="axios-使用"><a href="#axios-使用" class="headerlink" title="axios 使用"></a>axios 使用</h2><p>省略…<a href="https://www.kancloud.cn/yunye/axios/234845" target="_blank" rel="noopener">文档</a></p>
<h2 id="什么情况下需要-CORS-？"><a href="#什么情况下需要-CORS-？" class="headerlink" title="什么情况下需要 CORS ？"></a>什么情况下需要 CORS ？</h2><p>在下列场景中使用跨域 HTTP 请求：</p>
<ul>
<li>由 XMLHttpRequest 或 Fetch 发起的跨域 HTTP 请求。</li>
<li>Web 字体 (CSS 中通过 @font-face 使用跨域字体资源), 因此，网站就可以发布 TrueType 字体资源，并只允许已授权网站进行跨站调用。</li>
<li>WebGL 贴图</li>
<li>使用 drawImage 将 Images/video 画面绘制到 canvas</li>
</ul>
<blockquote>
<p>这次说的是第一种 XMLHttpRequest 发起的跨域 HTTP 请求。</p>
</blockquote>
<blockquote>
<p>大家可能会认为，项目中客户端无非是发起get、post请求，是否允许客户端访问，是服务器端要控制的，只要服务器响应头设置</p>
</blockquote>
<p>‘Access-Control-Allow-Origin’:’*’ //所有客户端<br>‘Access-Control-Allow-Origin’:’请求Origin值’  //允许特定客户端</p>
<p>其次，服务器响应对应个get、post请求类型和路径，这样就OK了。</p>
<h2 id="真的OK吗"><a href="#真的OK吗" class="headerlink" title="真的OK吗?"></a>真的OK吗?</h2><p>如果是OK的，说明应用场景叫简单；属于<code>简单请求</code>。</p>
<h2 id="简单请求"><a href="#简单请求" class="headerlink" title="简单请求"></a>简单请求</h2><p>某些请求不会触发 CORS 预检请求。本文称这样的请求为“简单请求”，请注意，该术语并不属于 Fetch （其中定义了 CORS）规范。若请求满足所有下述条件，则该请求可视为“简单请求”：</p>
<ul>
<li>使用下列方法之一：<ul>
<li>GET</li>
<li>HEAD</li>
<li>POST</li>
</ul>
</li>
<li>Fetch 规范定义了对 CORS 安全的首部字段集合，不得人为设置该集合之外的其他首部字段。该集合为：<ul>
<li>Accept</li>
<li>Accept-Language</li>
<li>Content-Language</li>
<li>Content-Type （需要注意额外的限制）</li>
<li>DPR</li>
<li>Downlink</li>
<li>Save-Data</li>
<li>Viewport-Width</li>
<li>Width</li>
</ul>
</li>
<li>Content-Type 的值仅限于下列三者之一：<ul>
<li>text/plain</li>
<li>multipart/form-data</li>
<li>application/x-www-form-urlencoded</li>
<li>请求中的任意XMLHttpRequestUpload 对象均没有注册任何事件监听器；XMLHttpRequestUpload 对象可以使用 XMLHttpRequest.upload 属性访问。</li>
<li>请求中没有使用 ReadableStream 对象。</li>
</ul>
</li>
</ul>
<blockquote>
<p>满足以上条件时，是简单请求，浏览器发送一次请求。</p>
</blockquote>
<h2 id="预检请求"><a href="#预检请求" class="headerlink" title="预检请求"></a>预检请求</h2><p>与简单请求不同，“需预检的请求”要求必须首先使用 OPTIONS   方法发起一个预检请求到服务器，以获知服务器是否允许该实际请求。”预检请求“的使用，可以避免跨域请求对服务器的用户数据产生未预期的影响。</p>
<blockquote>
<p>在破坏掉简单请求规则后，浏览器首先发起一个method=OPTIONS 的请求，询问服务器是否可以跨域等要求(跨域、方法、自定义头信息等特殊要求)，不满足则直接拒绝；如果同意时，则响应，并且响应头 新增 如下两个字段<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">Access-Control-Allow-Methods&apos; // 服务器所支持的请求方法</span><br><span class="line">Access-Control-Allow-Headers&apos; // 浏览器自定义的头部</span><br></pre></td></tr></table></figure></p>
</blockquote>
<p>加入原有请求是POST方式，在获的允许到，浏览器会再次发送一次POST请求；</p>
<blockquote>
<p>举个生活中的简单例子，现在小区周边的学校晚上都开放了，允许居民健身运动；<br>比如春节期间，你晚上去学校了，到了门口一看，门卫说假期不对外开放，结果是不能进去健身了，而且白跑一趟，浪费时间和精力，这相当于一个简单请求；<br>优化：去之前先打个电话，询问下是否可以健身，可以就去，不可以就去做其他事情，是不是很省事情呀，这个过程就是 OPTIONS 请求。</p>
</blockquote>
<p>继续故事，第二天，你仍然事先打电话询问，然后再做下一步打算，去或不去；时间多了，你会烦死的，门卫也会烦死的；<br>优化：多次电话询问后，门卫聪明了，这次他告诉你，接下来7天内每天都开放，这样你在最近7天肯定不会在打电话先咨询了；这个时间就是 OPTIONS 请求响应头<code>Access-Control-Max-Age</code>中设置缓存时间。</p>
<p>从中我们应该能感知到，在非简单请求时，浏览器认为是个<code>重请求</code>，超出了服务器默认设置，浏览器会认为可能会被服务器拒绝掉，因此携带大量数据去请求<code>可能白跑一趟</code>，做了优化，先<code>预检请求</code>,看下服务器是否允许，允许多久等，对于跨域请求性能有很大提高；</p>
<h4 id="当请求满足下述任一条件时，即应首先发送预检请求："><a href="#当请求满足下述任一条件时，即应首先发送预检请求：" class="headerlink" title="当请求满足下述任一条件时，即应首先发送预检请求："></a>当请求满足下述任一条件时，即应首先发送预检请求：</h4><ul>
<li><p>使用了下面任一 HTTP 方法：</p>
<ul>
<li>PUT</li>
<li>DELETE</li>
<li>CONNECT</li>
<li>OPTIONS</li>
<li>TRACE</li>
<li>PATCH</li>
</ul>
</li>
<li>人为设置了对 CORS 安全的首部字段集合之外的其他首部字段。该集合为：<ul>
<li>Accept</li>
<li>Accept-Language</li>
<li>Content-Language</li>
<li>Content-Type (but note the additional requirements below)</li>
<li>DPR</li>
<li>Downlink</li>
<li>Save-Data</li>
<li>Viewport-Width</li>
<li>Width</li>
</ul>
</li>
<li>Content-Type 的值不属于下列之一:<ul>
<li>application/x-www-form-urlencoded</li>
<li>multipart/form-data</li>
<li>text/plain</li>
</ul>
</li>
<li>请求中的XMLHttpRequestUpload 对象注册了任意多个事件监听器。</li>
<li>请求中使用了ReadableStream对象。</li>
</ul>
<h2 id="服务器改造"><a href="#服务器改造" class="headerlink" title="服务器改造"></a>服务器改造</h2><p>大部分情况下，我们设置了跨域，但忽略了对 OPTIONS 响应的处理，最终没有处理或者返回404，错误路径；</p>
<p>以下是 koa.js 简单处理，OPTIONS 请求返回204，允许访问，当然你可以针对路径设置 OPTIONS；<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">/**</span><br><span class="line"> * [cros跨域处理]</span><br><span class="line"> * @param  &#123;[type]&#125; async (ctx,         next [description]</span><br><span class="line"> * @return &#123;[type]&#125;       [description]</span><br><span class="line"> */</span><br><span class="line">app.use(async (ctx, next) =&gt; &#123;</span><br><span class="line">  ctx.set(&apos;Access-Control-Allow-Origin&apos;, &apos;*&apos;);</span><br><span class="line">  if (ctx.method === &apos;OPTIONS&apos;) &#123;</span><br><span class="line">    // 请求method =options，是预检请求</span><br><span class="line">    // 此时做些简单，处理，如果希望访问则如下，不希望时，</span><br><span class="line">    // 设置缓存时间，下次 OPTIONS 请求不会再次发起，直接使用真实的请求如GET、POST、PUT</span><br><span class="line">    // ctx.set(&quot;Access-Control-Max-Age&quot;, 86400000);</span><br><span class="line">    ctx.set(&apos;Access-Control-Allow-Methods&apos;, &apos;OPTIONS, GET, PUT, POST, DELETE&apos;);</span><br><span class="line">    ctx.set(&apos;Access-Control-Allow-Headers&apos;, ctx.header[&apos;access-control-request-headers&apos;]);</span><br><span class="line">    // 发回204状态码，数据是空</span><br><span class="line">    ctx.response.status = 204;</span><br><span class="line">  &#125; else &#123;</span><br><span class="line">    await next();</span><br><span class="line">  &#125;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure></p>
<p>参考：<a href="https://developer.mozilla.org/zh-CN/docs/Web/HTTP/Access_control_CORS" target="_blank" rel="noopener">https://developer.mozilla.org/zh-CN/docs/Web/HTTP/Access_control_CORS</a></p>

      
    </div>
    <footer class="article-footer">
      <a data-url="https://kangning1206.github.io/2017/06/09/axios/" data-id="cjp89btqc0002zvo1va1ckh23" class="article-share-link">Share</a>
      
    </footer>
  </div>

  

</article>



      
        <article id="post-performance" class="article article-type-post" itemscope="" itemprop="blogPost">

  <div class="article-inner">
    
      <header class="article-header">
        
  
    <h2 itemprop="name">
      <a class="article-title" href="/2017/04/23/performance/">性能优化</a>
    </h2>
  

      </header>
    

    
      <div class="article-meta">
        <a href="/2017/04/23/performance/" class="article-date">
  <time datetime="2017-04-23T02:35:53.000Z" itemprop="datePublished">2017-04-23</time>
</a>
        
      </div>
    

    <div class="article-entry" itemprop="articleBody">
      
      
      
        <h2 id="浏览器"><a href="#浏览器" class="headerlink" title="浏览器"></a>浏览器</h2><ul>
<li>缓存，如localStorage</li>
<li>预加载</li>
</ul>
<p>利用link rel=”preload” 提前下载，但并不会阻塞页面渲染；<br>as属性 设置加载的媒体类型；<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&lt;link rel=&quot;preload&quot; href=&quot;style.css&quot; as=&quot;style&quot;&gt;</span><br><span class="line">&lt;link rel=&quot;preload&quot; href=&quot;main.js&quot; as=&quot;script&quot;&gt;</span><br></pre></td></tr></table></figure></p>
<ul>
<li>图片合并</li>
<li><p>资源加载顺序<br>css 在 head区域加载,<br>js在尾部加载；如果js页面与渲染无关系，可以设置异步；</p>
</li>
<li><p>开发PWA 单页面应用；减少页面跳转和资源请求；</p>
</li>
</ul>
<h2 id="服务器"><a href="#服务器" class="headerlink" title="服务器"></a>服务器</h2><ul>
<li>cors缓存，比如options 请设置 头 Access-Control-Max-Age；</li>
<li>升级到http2协议</li>
<li>合理的缓存设置</li>
<li>gzip</li>
<li>文件压缩，css、js资源</li>
<li>避免重定向，重定向的后果是客户端需要发起多次请求后才获取到真正资源；</li>
</ul>
<h2 id="网络"><a href="#网络" class="headerlink" title="网络"></a>网络</h2><ul>
<li>cors跨域请求</li>
<li>网站资源预加载，在html中设置，包括dns-prefetch DNS;pre-loader css,js;</li>
<li>网络资源文件大小控制，比如压缩；</li>
<li>减少请求次数</li>
</ul>
<h2 id="JavaScript"><a href="#JavaScript" class="headerlink" title="JavaScript"></a>JavaScript</h2><ul>
<li>DOM 增删改， 操作次数，最好一次性触发页面reflow、repaint；</li>
<li>减少作用域链查找，需要频繁访问的变量，最好在本作用域内可以找到；</li>
<li>精简css文件，混淆、压缩；工程化打包工具会处理；source-map文件在外部或者不输出；</li>
<li>减小js文件：如删除js文件中重复代码，提取公共组件或函数；</li>
<li>ajax请求，首选get,会被浏览器缓存，post浏览器不缓存；</li>
</ul>
<h2 id="css"><a href="#css" class="headerlink" title="css"></a>css</h2><ul>
<li>css选择器 深度不宜多；css 引擎是从右往左的，左边不要添加太多限定词；</li>
<li>css 动画优先于js；</li>
<li>勿用css表达式；</li>
</ul>

      
    </div>
    <footer class="article-footer">
      <a data-url="https://kangning1206.github.io/2017/04/23/performance/" data-id="cjp89btqq000azvo1kxmkq6ak" class="article-share-link">Share</a>
      
    </footer>
  </div>

  

</article>



      
        <article id="post-xss" class="article article-type-post" itemscope="" itemprop="blogPost">

  <div class="article-inner">
    
      <header class="article-header">
        
  
    <h2 itemprop="name">
      <a class="article-title" href="/2016/08/15/xss/">xss 攻击与防御</a>
    </h2>
  

      </header>
    

    
      <div class="article-meta">
        <a href="/2016/08/15/xss/" class="article-date">
  <time datetime="2016-08-15T00:31:02.000Z" itemprop="datePublished">2016-08-15</time>
</a>
        
      </div>
    

    <div class="article-entry" itemprop="articleBody">
      
      
      
        <h2 id="XSS定义"><a href="#XSS定义" class="headerlink" title="XSS定义"></a>XSS定义</h2><p>跨站脚本攻击Cross-site scripting (XSS)是一种安全漏洞，攻击者可以利用这种漏洞在网站上注入恶意的客户端代码。当被攻击者登陆网站时就会自动运行这些恶意代码，从而，攻击者可以突破网站的访问权限，冒充受害者。</p>
<blockquote>
<p>简单点：用户访问网站时，浏览器上执行了<code>不是网站作者意图</code>的代码，而是一个<code>捣乱者</code>的意图，不受控作者控制了，那么<code>捣乱者</code>就可能会窃取访问者的信息；</p>
</blockquote>
<h2 id="危害"><a href="#危害" class="headerlink" title="危害"></a>危害</h2><ul>
<li>窃取用户的cookie，localStorage;</li>
<li>将用户重定向到钓鱼网站，比如跳转到一个似真银行网站，当你输入用户名和密码时登录时，实际是在钓鱼网站操作。</li>
<li>破坏网站内容和结构；</li>
<li>注入广告、垃圾信息；</li>
</ul>
<h2 id="存储型-XSS"><a href="#存储型-XSS" class="headerlink" title="存储型 XSS"></a>存储型 XSS</h2><p>如果您的网站是与用户有数据交互的，比如论坛，基本流程是用户发帖子、帖子被其他用户浏览，帖子内容网站管理员不可以扭曲，需保证一致性，借此，恶意发帖人会注入一段javascript脚本，然后上传到服务器，最后帖子被查看时，服务器原样吐出来，问题是吐出来时已经不是网站作者的原有意图了；</p>
<h3 id="防御方法"><a href="#防御方法" class="headerlink" title="防御方法"></a>防御方法</h3><ul>
<li>第一种：replace 内容存储前处理，在写入数据库时，过滤掉不安全内容，然后在存储；<br>特点：用户编辑时，已经不是当初内容了，而且服务器上也找不到原来内容；</li>
<li>第二种：filter 响应时，过滤掉不安全内容，只输出安全内容，像php中有过滤规定标签的函数可以处理；<br>特点：用户编辑时，已经不是当初内容了，但服务器上有；</li>
<li>第三种，在浏览器端展现时，htmlEncode 编码，使其不可以在浏览器上执行；<br>特点：用户编辑时，看到的就是原有内容；</li>
</ul>
<blockquote>
<p>从内容一致性原则看，第三种最好，文本输入框输入不做限制，也许用户输入标签和脚本 本来就是他的目的，比如技术帖子，正常的需求。但前段工程师在输出页面时必须 htmlEncode 编码输出页面，不给不法者运行环境；</p>
</blockquote>
<p>三种各有特点，使用场景不一样，比如第一种，业务需求是不允许输入特殊字符，服务器在存储前做校验，不通过时告知用户，只有符合规则了才给予了保存。</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="https://kangning1206.github.io/2016/08/15/xss/" data-id="cjp89btr2000ezvo19y5nqxoq" class="article-share-link">Share</a>
      
    </footer>
  </div>

  

</article>



      
  </article>
  
  
    <nav class="page-nav">
      
      <span class="page-number current">1</span><a class="page-number" href="/page/2/">2</a><a class="extend next" rel="next" href="/page/2/">Olde posts</a>
    </nav>
  
</section>
</div>

  <footer class="footer">
  
  <div class="outer">
    <ul class="list-inline">
      <li>&copy; 2018 点滴</li>
      <li>Powered by <a href="http://hexo.io/" target="_blank">Hexo</a></li>
      <li>Theme  <a href="https://zhwangart.github.io">zhwangart</a></li>
    </ul>
  </div>
</footer>
</main>
<aside class="sidebar">
  <button class="navbar-toggle"></button>

<nav class="navbar">
  
    <div class="logo">
      <a href="/"><img src="/images/hexo.svg" alt="点滴"></a>
    </div>
  
  <ul class="nav nav-main">
    
      <li class="nav-item">
        <a class="nav-item-link" href="/">Home</a>
      </li>
    
      <li class="nav-item">
        <a class="nav-item-link" href="/archives">Archives</a>
      </li>
    
      <li class="nav-item">
        <a class="nav-item-link" href="/gallery">Gallery</a>
      </li>
    
      <li class="nav-item">
        <a class="nav-item-link" href="/about">About</a>
      </li>
    
    <li class="nav-item">
      <a class="nav-item-link nav-item-search" title="搜索">
        <i class="fe fe-search"></i>
        Search
      </a>
    </li>
  </ul>
</nav>

<nav class="navbar navbar-bottom">
  <ul class="nav">
    <li class="nav-item">
      
        <a class="nav-item-link" target="_blank" href="/atom.xml" title="RSS Feed">
          <i class="fe fe-feed"></i>
        </a>
      
    </li>
  </ul>
</nav>

<div class="search-form-wrap">
  <div class="local-search local-search-plugin">
  <input type="search" id="local-search-input" class="local-search-input" placeholder="Search...">
  <div id="local-search-result" class="local-search-result"></div>
</div>
</div>
</aside>
<script src="/js/jquery-2.0.3.min.js"></script>
<script src="/js/lazyload.min.js"></script>


  <script src="/fancybox/jquery.fancybox.min.js"></script>



  <script src="/js/search.js"></script>


<script src="/js/ocean.js"></script>

</body>
</html>